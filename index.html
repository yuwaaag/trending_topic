<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <title>PTN News - Gemini 3 Flash Auto</title>
    <style>
        body { margin: 0; background: #000; color: white; font-family: 'Segoe UI', sans-serif; overflow: hidden; }
        .studio { position: relative; width: 1920px; height: 1080px; background: #050505; }
        .display-unit { position: absolute; left: 80px; top: 120px; width: 850px; height: 480px; border: 4px solid #00f2ff; border-radius: 15px; overflow: hidden; background: #111; box-shadow: 0 0 30px rgba(0,242,255,0.4); }
        #trendImg { width: 100%; height: 100%; object-fit: cover; }
        .analysis-box { position: absolute; left: 80px; bottom: 80px; width: 850px; background: rgba(0,8,25,0.95); border-left: 15px solid #00f2ff; padding: 35px; font-size: 32px; z-index: 15; border-radius: 0 25px 25px 0; line-height: 1.5; min-height: 400px; box-sizing: border-box; }
        h1 { color: #00f2ff; font-size: 38px; margin: 0 0 15px 0; }
        .anchor-zone { position: absolute; right: 0; bottom: 0; width: 950px; height: 1080px; z-index: 5; }
        video { width: 100%; height: 100%; object-fit: contain; }
    </style>
</head>
<body>

<div class="studio">
    <div class="display-unit">
        <img id="trendImg" src="">
    </div>

    <div class="analysis-box">
        <h1 id="headline">‡§∏‡§ø‡§∏‡•ç‡§ü‡§Æ ‡§ï‡§®‡•á‡§ï‡•ç‡§ü ‡§π‡•ã ‡§∞‡§π‡§æ ‡§π‡•à...</h1>
        <p id="content">Gemini 3 Flash Preview ‡§Æ‡•â‡§°‡§≤ ‡§∏‡•á ‡§§‡§æ‡§ú‡§º‡§æ ‡§ñ‡§¨‡§∞‡•á‡§Ç ‡§ñ‡•ã‡§ú‡•Ä ‡§ú‡§æ ‡§∞‡§π‡•Ä ‡§π‡•à‡§Ç‡•§ <br><br> <span style="color:yellow;">‡§∂‡•Å‡§∞‡•Ç ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§è‡§ï ‡§¨‡§æ‡§∞ ‡§ï‡•ç‡§≤‡§ø‡§ï ‡§ï‡§∞‡•á‡§Ç‡•§</span></p>
    </div>

    <div class="anchor-zone">
        <video id="anchorVid" muted loop><source src="anchor_video.mp4" type="video/mp4"></video>
    </div>
</div>

<script>
    // üî¥ ‡§Ø‡§π‡§æ‡§Å ‡§Ö‡§™‡§®‡•Ä ‡§¨‡§ø‡§≤‡•ç‡§ï‡•Å‡§≤ ‡§®‡§à API Key ‡§°‡§æ‡§≤‡•á‡§Ç
    const API_KEY = "AIzaSyB0rTzlgnkcJn02amykEQ_edXkEs1qtm14"; 

    async function fetchAutoNews() {
        const headline = document.getElementById('headline');
        const content = document.getElementById('content');
        
        // üü¢ ‡§Æ‡•â‡§°‡§≤ ‡§ï‡§æ ‡§®‡§æ‡§Æ ‡§µ‡§π‡•Ä ‡§ú‡•ã ‡§Ü‡§™‡§®‡•á ‡§¨‡§§‡§æ‡§Ø‡§æ: gemini-3-flash-preview
        const aiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-3-flash-preview:generateContent?key=${API_KEY}`;

        try {
            // 1. ‡§ü‡•ç‡§∞‡•á‡§Ç‡§°‡§ø‡§Ç‡§ó ‡§ü‡•â‡§™‡§ø‡§ï ‡§¢‡•Ç‡§Å‡§¢‡§®‡§æ
            const topicRes = await fetch(aiUrl, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ contents: [{ parts: [{ text: "Give me 1 major trending news topic in India for today. Just the name." }] }] })
            });
            const topicData = await topicRes.json();
            const topic = topicData.candidates[0].content.parts[0].text.trim();
            
            headline.innerText = "BREAKING: " + topic;
            document.getElementById('trendImg').src = `https://image.pollinations.ai/prompt/professional%20news%20visual%20for%20${encodeURIComponent(topic)}?width=850&height=480&nologo=true`;

            // 2. ‡§ó‡§π‡§∞‡§æ ‡§µ‡§ø‡§∂‡•ç‡§≤‡•á‡§∑‡§£ (Deep Analysis)
            const analysisPrompt = `Aap ek senior news analyst hain. Topic "${topic}" par 150-200 words ka gehra news analysis Hindi mein likhein. Namaskar se shuru karein. Sirf Hindi text.`;

            const analysisRes = await fetch(aiUrl, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ contents: [{ parts: [{ text: analysisPrompt }] }] })
            });
            const analysisData = await analysisRes.json();
            const script = analysisData.candidates[0].content.parts[0].text.trim();

            speak(script);

        } catch (e) {
            content.innerHTML = "<span style='color:red;'>‡§Æ‡•â‡§°‡§≤ ‡§ï‡§®‡•á‡§ï‡•ç‡§∂‡§® ‡§è‡§∞‡§∞!</span><br>‡§ï‡•É‡§™‡§Ø‡§æ ‡§ö‡•á‡§ï ‡§ï‡§∞‡•á‡§Ç ‡§ï‡§ø ‡§Ü‡§™‡§ï‡•Ä API Key ‡§á‡§∏ ‡§®‡§è ‡§Æ‡•â‡§°‡§≤ (Gemini 3 Flash) ‡§ï‡•á ‡§≤‡§ø‡§è ‡§∏‡§ï‡•ç‡§∞‡§ø‡§Ø ‡§π‡•à ‡§Ø‡§æ ‡§®‡§π‡•Ä‡§Ç‡•§";
            console.error(e);
        }
    }

    function speak(txt) {
        document.getElementById('content').innerText = txt;
        window.speechSynthesis.cancel();
        const msg = new SpeechSynthesisUtterance(txt);
        msg.lang = 'hi-IN';
        msg.rate = 0.9;
        const v = document.getElementById('anchorVid');
        msg.onstart = () => v.play();
        msg.onend = () => {
            v.pause();
            setTimeout(fetchAutoNews, 30000); // 30 ‡§∏‡•á‡§ï‡§Ç‡§° ‡§¨‡§æ‡§¶ ‡§Ö‡§ó‡§≤‡•Ä ‡§§‡§æ‡§ú‡§º‡§æ ‡§ñ‡§¨‡§∞
        };
        window.speechSynthesis.speak(msg);
    }

    window.onclick = () => fetchAutoNews();
</script>
</body>
</html>
