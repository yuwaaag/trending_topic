<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <title>PTN News - Gemini 2.5 Flash</title>
    <style>
        body { margin: 0; background: #000; color: white; font-family: 'Segoe UI', sans-serif; overflow: hidden; }
        .studio { position: relative; width: 1920px; height: 1080px; }
        .news-screen { position: absolute; left: 80px; top: 120px; width: 850px; height: 480px; border: 4px solid #00f2ff; border-radius: 15px; overflow: hidden; background: #111; box-shadow: 0 0 30px rgba(0,242,255,0.4); }
        #newsImg { width: 100%; height: 100%; object-fit: cover; }
        .analysis-box { position: absolute; left: 80px; bottom: 80px; width: 820px; background: rgba(0,8,25,0.95); border-left: 15px solid #ff0000; padding: 35px; border-radius: 0 20px 20px 0; min-height: 400px; }
        h1 { color: #00f2ff; font-size: 38px; margin: 0; }
        p { font-size: 32px; line-height: 1.5; margin-top: 15px; }
        .anchor-area { position: absolute; right: 0; bottom: 0; width: 950px; height: 1080px; }
        video { width: 100%; height: 100%; object-fit: contain; }
    </style>
</head>
<body>

<div class="studio">
    <div class="news-screen"><img id="newsImg" src=""></div>
    <div class="analysis-box">
        <h1 id="headline">‡§∏‡§ø‡§∏‡•ç‡§ü‡§Æ ‡§∏‡§ï‡•ç‡§∞‡§ø‡§Ø ‡§π‡•ã ‡§∞‡§π‡§æ ‡§π‡•à...</h1>
        <p id="content">Gemini 2.5 Flash ‡§Æ‡•â‡§°‡§≤ ‡§∏‡•á ‡§§‡§æ‡§ú‡§º‡§æ ‡§ñ‡§¨‡§∞‡•á‡§Ç ‡§ñ‡•ã‡§ú‡•Ä ‡§ú‡§æ ‡§∞‡§π‡•Ä ‡§π‡•à‡§Ç‡•§</p>
    </div>
    <div class="anchor-area">
        <video id="anchorVid" muted loop><source src="anchor_video.mp4" type="video/mp4"></video>
    </div>
</div>

<script>
    // üî¥ ‡§Ö‡§™‡§®‡•Ä ‡§¨‡§ø‡§≤‡•ç‡§ï‡•Å‡§≤ ‡§®‡§à API Key ‡§Ø‡§π‡§æ‡§Å ‡§°‡§æ‡§≤‡•á‡§Ç
    const API_KEY = "AIzaSyB0rTzlgnkcJn02amykEQ_edXkEs1qtm14"; 

    async function fetchGemini25News() {
        const headline = document.getElementById('headline');
        const content = document.getElementById('content');
        
        // üü¢ ‡§Ø‡§π‡§æ‡§Å 'gemini-2.5-flash' ‡§Æ‡•â‡§°‡§≤ ‡§ï‡§æ ‡§â‡§™‡§Ø‡•ã‡§ó ‡§ï‡§ø‡§Ø‡§æ ‡§ó‡§Ø‡§æ ‡§π‡•à
        const url = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash:generateContent?key=${API_KEY}`;

        try {
            // ‡§∏‡•ç‡§ü‡•á‡§™ 1: ‡§Ü‡§ú ‡§ï‡§æ ‡§Æ‡•Å‡§ñ‡•ç‡§Ø ‡§ü‡•ç‡§∞‡•á‡§Ç‡§°‡§ø‡§Ç‡§ó ‡§ü‡•â‡§™‡§ø‡§ï ‡§¢‡•Ç‡§Å‡§¢‡§®‡§æ
            const topicRes = await fetch(url, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ contents: [{ parts: [{ text: "Tell me 1 major trending news topic in India for today. Just the topic name." }] }] })
            });
            const topicData = await topicRes.json();
            
            // ‡§Ö‡§ó‡§∞ ‡§Æ‡•â‡§°‡§≤ 2.5 ‡§Ö‡§≠‡•Ä ‡§Ü‡§™‡§ï‡•Ä Key ‡§ï‡•á ‡§≤‡§ø‡§è ‡§ö‡§æ‡§≤‡•Ç ‡§®‡§π‡•Ä‡§Ç ‡§π‡•ã‡§ó‡§æ, ‡§§‡•ã ‡§Ø‡§π‡§æ‡§Å ‡§è‡§∞‡§∞ ‡§Æ‡•à‡§∏‡•á‡§ú ‡§Ü‡§è‡§ó‡§æ
            if (topicData.error) {
                content.innerText = "Error: " + topicData.error.message;
                return;
            }

            const topic = topicData.candidates[0].content.parts[0].text.trim();
            headline.innerText = "BREAKING: " + topic;
            document.getElementById('newsImg').src = `https://image.pollinations.ai/prompt/professional%20news%20visual%20for%20${encodeURIComponent(topic)}?nologo=true`;

            // ‡§∏‡•ç‡§ü‡•á‡§™ 2: ‡§â‡§∏ ‡§ü‡•â‡§™‡§ø‡§ï ‡§™‡§∞ ‡§ó‡§π‡§∞‡§æ ‡§µ‡§ø‡§∂‡•ç‡§≤‡•á‡§∑‡§£ (Deep Analysis)
            const analysisPrompt = `Aap ek professional news analyst hain. Topic "${topic}" par 150 words ka gehra news analysis Hindi mein likhein. Namaskar se shuru karein.`;

            const analysisRes = await fetch(url, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ contents: [{ parts: [{ text: analysisPrompt }] }] })
            });
            const analysisData = await analysisRes.json();
            const finalScript = analysisData.candidates[0].content.parts[0].text;

            speak(finalScript);

        } catch (e) {
            content.innerText = "‡§ï‡§®‡•á‡§ï‡•ç‡§∂‡§® ‡§è‡§∞‡§∞! ‡§ï‡•É‡§™‡§Ø‡§æ ‡§Ö‡§™‡§®‡•Ä API Key ‡§î‡§∞ ‡§Æ‡•â‡§°‡§≤ ‡§ï‡§æ ‡§®‡§æ‡§Æ ‡§ö‡•á‡§ï ‡§ï‡§∞‡•á‡§Ç‡•§";
        }
    }

    function speak(txt) {
        document.getElementById('content').innerText = txt;
        window.speechSynthesis.cancel();
        
        const msg = new SpeechSynthesisUtterance(txt);
        msg.lang = 'hi-IN';
        msg.rate = 0.9;
        
        // ‡§™‡§ï‡•ç‡§ï‡§æ ‡§ï‡§∞‡•á‡§Ç ‡§ï‡§ø ‡§Ü‡§µ‡§æ‡§ú‡§º ‡§≤‡•ã‡§° ‡§π‡•ã
        const voices = window.speechSynthesis.getVoices();
        const hindiVoice = voices.find(v => v.lang.includes('hi'));
        if (hindiVoice) msg.voice = hindiVoice;

        const video = document.getElementById('anchorVid');
        msg.onstart = () => video.play();
        msg.onend = () => {
            video.pause();
            setTimeout(fetchGemini25News, 20000); 
        };
        
        window.speechSynthesis.speak(msg);
    }

    // ‡§∏‡•ç‡§ï‡•ç‡§∞‡•Ä‡§® ‡§™‡§∞ ‡§ï‡§π‡•Ä‡§Ç ‡§≠‡•Ä ‡§ï‡•ç‡§≤‡§ø‡§ï ‡§ï‡§∞‡§§‡•á ‡§π‡•Ä ‡§®‡•ç‡§Ø‡•Ç‡§ú‡§º ‡§∂‡•Å‡§∞‡•Ç ‡§π‡•ã ‡§ú‡§æ‡§è‡§ó‡•Ä
    window.onclick = () => fetchGemini25News();
</script>
</body>
</html>
