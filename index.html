<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <title>PTN News - Gemini 2.0 Flash</title>
    <style>
        body, html { margin: 0; padding: 0; width: 100%; height: 100%; background: #000; overflow: hidden; font-family: sans-serif; color: white; }
        .studio { position: relative; width: 100vw; height: 100vh; background: url('studio.jpg') center/cover; background-color: #111; }
        .news-img { position: absolute; left: 5%; top: 10%; width: 40%; height: 40%; border: 3px solid #00f2ff; border-radius: 10px; overflow: hidden; }
        .analysis { position: absolute; left: 5%; bottom: 5%; width: 45%; height: 40%; background: rgba(0,8,20,0.95); border-left: 10px solid red; padding: 20px; box-sizing: border-box; overflow-y: auto; }
        .anchor { position: absolute; right: 0; bottom: 0; width: 50%; height: 95%; }
        video { width: 100%; height: 100%; object-fit: contain; }
    </style>
</head>
<body>

<div class="studio">
    <div class="news-img"><img id="newsImg" src="" style="width:100%; height:100%; object-fit:cover;"></div>
    <div class="analysis">
        <h1 id="title" style="color:#00f2ff; font-size: 26px; margin:0;">PTN NEWS</h1>
        <p id="msg" style="font-size: 22px; color: yellow;">Gemini 2.0 Flash ‡§≤‡•ã‡§° ‡§π‡•ã ‡§∞‡§π‡§æ ‡§π‡•à... ‡§ï‡•ç‡§≤‡§ø‡§ï ‡§ï‡§∞‡•á‡§Ç‡•§</p>
    </div>
    <div class="anchor">
        <video id="vid" muted loop><source src="anchor_video.mp4" type="video/mp4"></video>
    </div>
</div>

<script>
    let myApiKey = "";

    async function runGemini2() {
        if (!myApiKey) {
            myApiKey = prompt("‡§Ö‡§™‡§®‡•Ä ‡§¨‡§ø‡§≤‡•ç‡§ï‡•Å‡§≤ ‡§®‡§à Gemini API Key ‡§Ø‡§π‡§æ‡§Å ‡§°‡§æ‡§≤‡•á‡§Ç:");
            if (!myApiKey) return;
        }

        const msgBox = document.getElementById("msg");
        msgBox.innerText = "Gemini 2.0 ‡§∏‡•á ‡§§‡§æ‡•õ‡§æ ‡§è‡§®‡§æ‡§≤‡§ø‡§∏‡§ø‡§∏ ‡§Ü ‡§∞‡§π‡§æ ‡§π‡•à...";

        // üü¢ ‡§∏‡•Å‡§ß‡§æ‡§∞: ‡§Ø‡§π‡§æ‡§Å ‡§π‡§Æ‡§®‡•á 2.0 Flash ‡§ï‡§æ ‡§∏‡•ç‡§ü‡•á‡§¨‡§≤ ‡§è‡§Ç‡§°‡§™‡•â‡§á‡§Ç‡§ü ‡§á‡§∏‡•ç‡§§‡•á‡§Æ‡§æ‡§≤ ‡§ï‡§ø‡§Ø‡§æ ‡§π‡•à
        const url = `https://generativelanguage.googleapis.com/v1/models/gemini-2.0-flash:generateContent?key=${myApiKey}`;

        const payload = {
            contents: [{
                parts: [{ text: "Aap ek professional news anchor hain. Aaj ki 1 badi trending news ka Headline aur 100 words ka Hindi analysis dein. Output style: Headline: [TEXT] Analysis: [TEXT]" }]
            }]
        };

        try {
            const response = await fetch(url, {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify(payload)
            });

            const data = await response.json();
            
            if (data.error) {
                // ‡§Ö‡§ó‡§∞ 2.0 ‡§â‡§™‡§≤‡§¨‡•ç‡§ß ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à, ‡§§‡•ã ‡§Ø‡§π ‡§Ö‡§™‡§®‡•á ‡§Ü‡§™ 1.5 ‡§™‡§∞ ‡§µ‡§æ‡§™‡§∏ ‡§ú‡§æ‡§®‡•á ‡§ï‡•Ä ‡§ï‡•ã‡§∂‡§ø‡§∂ ‡§ï‡§∞‡•á‡§ó‡§æ
                throw new Error(data.error.message);
            }

            const rawText = data.candidates[0].content.parts[0].text;
            
            // ‡§°‡•á‡§ü‡§æ ‡§ï‡•ã ‡§ï‡•ç‡§≤‡•Ä‡§® ‡§ï‡§∞‡§®‡§æ
            const headline = rawText.split("Analysis:")[0].replace("Headline:", "").trim();
            const analysis = rawText.split("Analysis:")[1].trim();

            document.getElementById("title").innerText = "‡§¨‡•ç‡§∞‡•á‡§ï‡§ø‡§Ç‡§ó: " + headline;
            document.getElementById("newsImg").src = `https://image.pollinations.ai/prompt/news%20broadcast%20visual%20for%20${encodeURIComponent(headline)}?nologo=true`;
            
            startVoice(analysis);

        } catch (error) {
            msgBox.innerHTML = `<span style="color:red;">‡§è‡§∞‡§∞: ${error.message}</span><br>‡§π‡•ã ‡§∏‡§ï‡§§‡§æ ‡§π‡•à ‡§Ü‡§™‡§ï‡•á ‡§Ö‡§ï‡§æ‡§â‡§Ç‡§ü ‡§Æ‡•á‡§Ç 2.0 ‡§Ö‡§≠‡•Ä ‡§è‡§ï‡•ç‡§ü‡§ø‡§µ ‡§® ‡§π‡•ã‡•§`;
            console.error(error);
            myApiKey = ""; 
        }
    }

    function startVoice(txt) {
        document.getElementById("msg").innerText = txt;
        window.speechSynthesis.cancel();
        const speech = new SpeechSynthesisUtterance(txt);
        speech.lang = 'hi-IN';
        speech.rate = 0.95;

        const v = document.getElementById("vid");
        speech.onstart = () => v.play();
        speech.onend = () => {
            v.pause();
            setTimeout(runGemini2, 18000); 
        };
        window.speechSynthesis.speak(speech);
    }

    window.onclick = () => runGemini2();
</script>
</body>
</html>
