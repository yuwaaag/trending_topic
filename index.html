<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <title>PTN News - Gemini 3 Preview</title>
    <style>
        body { margin: 0; background: #000; color: white; font-family: 'Segoe UI', sans-serif; overflow: hidden; }
        .studio { position: relative; width: 1920px; height: 1080px; }
        .news-screen { position: absolute; left: 80px; top: 120px; width: 850px; height: 480px; border: 4px solid #00f2ff; border-radius: 15px; overflow: hidden; background: #111; box-shadow: 0 0 30px rgba(0,242,255,0.4); }
        #newsImg { width: 100%; height: 100%; object-fit: cover; }
        .analysis-box { position: absolute; left: 80px; bottom: 80px; width: 820px; background: rgba(0,8,25,0.95); border-left: 15px solid #00f2ff; padding: 35px; border-radius: 0 20px 20px 0; min-height: 400px; }
        h1 { color: #00f2ff; font-size: 38px; margin: 0; }
        p { font-size: 32px; line-height: 1.5; margin-top: 15px; }
        .anchor-zone { position: absolute; right: 0; bottom: 0; width: 950px; height: 1080px; }
        video { width: 100%; height: 100%; object-fit: contain; }
    </style>
</head>
<body>

<div class="studio">
    <div class="news-screen"><img id="newsImg" src=""></div>
    <div class="analysis-box">
        <h1 id="headline">‡§∏‡§ø‡§∏‡•ç‡§ü‡§Æ ‡§§‡•à‡§Ø‡§æ‡§∞ ‡§π‡•à...</h1>
        <p id="content" style="color: yellow;">‡§∂‡•Å‡§∞‡•Ç ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§∏‡•ç‡§ï‡•ç‡§∞‡•Ä‡§® ‡§™‡§∞ ‡§ï‡§π‡•Ä‡§Ç ‡§≠‡•Ä '‡§ï‡•ç‡§≤‡§ø‡§ï' ‡§ï‡§∞‡•á‡§Ç‡•§</p>
    </div>
    <div class="anchor-zone">
        <video id="anchorVid" muted loop><source src="anchor_video.mp4" type="video/mp4"></video>
    </div>
</div>

<script>
    // üî¥ ‡§Ø‡§π‡§æ‡§Å ‡§Ö‡§™‡§®‡•Ä ‡§¨‡§ø‡§≤‡•ç‡§ï‡•Å‡§≤ ‡§®‡§à API Key ‡§°‡§æ‡§≤‡•á‡§Ç
    const API_KEY = "AIzaSyB0rTzlgnkcJn02amykEQ_edXkEs1qtm14"; 

    async function fetchNews() {
        const headline = document.getElementById('headline');
        const content = document.getElementById('content');
        
        // üü¢ Gemini-3-flash-preview ‡§Æ‡•â‡§°‡§≤ ‡§ï‡§æ ‡§∏‡§π‡•Ä ‡§¨‡•Ä‡§ü‡§æ ‡§Ø‡•Ç‡§Ü‡§∞‡§è‡§≤
        const url = `https://generativelanguage.googleapis.com/v1beta/models/gemini-3-flash-preview:generateContent?key=${API_KEY}`;

        try {
            // 1. ‡§ü‡•ç‡§∞‡•á‡§Ç‡§°‡§ø‡§Ç‡§ó ‡§ñ‡§¨‡§∞ ‡§¢‡•Ç‡§Ç‡§¢‡§®‡§æ
            const resTopic = await fetch(url, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ contents: [{ parts: [{ text: "Tell me 1 current major trending news headline in India for today. Just the name." }] }] })
            });
            const dataTopic = await resTopic.json();
            const topic = dataTopic.candidates[0].content.parts[0].text.trim();
            
            headline.innerText = "BREAKING: " + topic;
            document.getElementById('newsImg').src = `https://image.pollinations.ai/prompt/professional%20news%20visual%20for%20${encodeURIComponent(topic)}?nologo=true`;

            // 2. ‡§ó‡§π‡§∞‡§æ ‡§µ‡§ø‡§∂‡•ç‡§≤‡•á‡§∑‡§£ (Deep Analysis)
            const resAnalysis = await fetch(url, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ contents: [{ parts: [{ text: `Aap news analyst hain. Topic "${topic}" par 120 words ka gehra news analysis Hindi mein likhein. Shuruat Namaskar se karein.` }] }] })
            });
            const dataAnalysis = await resAnalysis.json();
            const script = dataAnalysis.candidates[0].content.parts[0].text;
            
            speak(script);

        } catch (e) {
            content.innerText = "API Error: ‡§ï‡•É‡§™‡§Ø‡§æ ‡§Ö‡§™‡§®‡•Ä Key ‡§ö‡•á‡§ï ‡§ï‡§∞‡•á‡§Ç‡•§";
        }
    }

    function speak(txt) {
        document.getElementById('content').innerText = txt;
        window.speechSynthesis.cancel();
        
        const msg = new SpeechSynthesisUtterance(txt);
        msg.lang = 'hi-IN';
        msg.rate = 0.9;

        // ‡§™‡§ï‡•ç‡§ï‡§æ ‡§ï‡§∞‡•á‡§Ç ‡§ï‡§ø ‡§π‡§ø‡§Ç‡§¶‡•Ä ‡§Ü‡§µ‡§æ‡•õ ‡§π‡•Ä ‡§â‡§™‡§Ø‡•ã‡§ó ‡§π‡•ã
        const voices = window.speechSynthesis.getVoices();
        const hindiVoice = voices.find(v => v.lang.includes('hi'));
        if (hindiVoice) msg.voice = hindiVoice;

        const video = document.getElementById('anchorVid');
        msg.onstart = () => video.play();
        msg.onend = () => {
            video.pause();
            setTimeout(fetchNews, 20000); // 20 ‡§∏‡•á‡§ï‡§Ç‡§° ‡§¨‡§æ‡§¶ ‡§Ö‡§ó‡§≤‡•Ä ‡§§‡§æ‡•õ‡§æ ‡§ñ‡§¨‡§∞
        };
        
        window.speechSynthesis.speak(msg);
    }

    // ‡§¨‡•ç‡§∞‡§æ‡§â‡•õ‡§∞ ‡§™‡§æ‡§¨‡§Ç‡§¶‡•Ä ‡§π‡§ü‡§æ‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§ï‡•ç‡§≤‡§ø‡§ï ‡§´‡§Ç‡§ï‡•ç‡§∂‡§®
    window.onclick = () => {
        // ‡§Ü‡§µ‡§æ‡•õ ‡§ï‡•ã '‡§Ö‡§®‡§≤‡•â‡§ï' ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§è‡§ï ‡§ñ‡§æ‡§≤‡•Ä ‡§Æ‡•à‡§∏‡•á‡§ú ‡§ö‡§≤‡§æ‡§è‡§Ç
        window.speechSynthesis.speak(new SpeechSynthesisUtterance(""));
        fetchNews();
    };
</script>
</body>
</html>
